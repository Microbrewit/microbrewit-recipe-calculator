<div class="{{step.type}} step-wrapper">

	<div ng-if="step.type === undefined" class="inner-wrapper">
		<ul class="step-chooser">
			<li ng-repeat="type in step.availableTypes">
				<div ng-click="setStepType(type)">{{type}}</div>
			</li>
		</ul>
	</div>

	<div ng-if="step.type !== undefined" class="inner-wrapper">
		<div class="step-number">{{step.stepNumber}}</div>
		<div class="step-meta">
			<span class="step-type">{{step.type}}</span>

			<span class="values">
				<label for="length">Volume </label><mb-convert id="volume" modelunit="liters" localunit="{{user.settings.liquid}}" modelvalue="step.volume"></mb-convert>
				<label for="length">Length: </label><input type="text" id="length" ng-model="step.length"/>
				<label for="length">Temperature: </label>
				<mb-convert id="temperature" modelunit="celcius" localunit="{{user.settings.temperature}}" modelvalue="step.temperature"></mb-convert>
				<button class="remove form-button" ng-click="remove(step)">X</button>
			</span>
		</div>
		
		<ul class="listItem-list ingredients">
			<li ng-repeat="result in step.ingredients">
				<mb-ingredient ingredient="result" settings="settings" recipe="recipe" refresh="refresh" step="step" remove="removeIngredient"></mb-ingredient><!-- 
				<span class="remove" ng-click="removeIngredient(ingredient)">Remove ingredient</span> -->
			</li>
		</ul>

		<div class="add-ingredient-wrapper">
			<span class="add-ingredient" ng-click="addIngredient()">Add ingredient</span>
		</div>
		
		<textarea class="step-notes" ng-model="step.notes" placeholder="notes"></textarea>
	</div>
</div>